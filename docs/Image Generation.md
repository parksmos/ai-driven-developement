## 이미지 생성 화면 기능명세서

---

### 프론트엔드 기능명세서

#### 1. 화면 레이아웃 및 디자인 명세

- **파일 위치**: `app/create/page.tsx`

1. **프롬프트 입력 필드**
   - **UI 구성**: 화면 상단에 배치된 넓은 텍스트 입력 필드로, ShadCN의 `Textarea` 컴포넌트를 사용해 사용자가 상세한 프롬프트를 입력할 수 있도록 합니다.
   - **상호작용**: 사용자가 텍스트를 입력하면 실시간으로 입력 길이가 표시되며, 최대 글자 수(500자)를 초과하지 않도록 제한합니다.
   - **오류 처리**: 프롬프트 필드가 비어 있을 경우 생성 버튼이 비활성화되며, 최소 10자 이상 입력하도록 안내 메시지가 표시됩니다.
   - **디자인**: 입력 필드에 "원하는 이미지를 자세히 설명해보세요..."와 같은 플레이스홀더 텍스트를 추가하고, 포커스 시 테두리 색이 메인 브랜드 색상(#4A90E2)으로 변경됩니다.

2. **스타일 옵션 선택 섹션**
   - **UI 구성**: 프롬프트 입력 필드 아래에 가로로 배치된 옵션 선택 영역으로, 다음 항목들을 포함합니다:
     - **색감 설정**: ShadCN의 `Select` 컴포넌트를 사용한 드롭다운 메뉴(밝은, 어두운, 비비드, 파스텔, 모노크롬 등)
     - **텍스처 설정**: `Select` 컴포넌트로 구현된 드롭다운 메뉴(부드러운, 거친, 매트, 광택 등)
     - **분위기 설정**: `Select` 컴포넌트로 구현된 드롭다운 메뉴(따뜻한, 차가운, 몽환적, 사실적 등)
     - **스타일 강도 조절**: `Slider` 컴포넌트를 사용한 슬라이더(0~100%)
   - **상호작용**: 각 옵션 변경 시 실시간으로 상태가 업데이트되며, 선택된 옵션은 시각적으로 강조됩니다.
   - **디자인**: 각 옵션 섹션은 구분선으로 분리되며, 옵션명은 16pt Semi-Bold 텍스트로 표시됩니다.

3. **이미지 생성 버튼**
   - **UI 구성**: 스타일 옵션 선택 섹션 하단에 배치된 큰 직사각형 버튼으로, ShadCN의 `Button` 컴포넌트를 사용합니다.
   - **상호작용**: 버튼 클릭 시 로딩 상태를 표시하며, 로딩 중에는 회전하는 스피너 아이콘과 함께 "이미지 생성 중..." 텍스트가 표시됩니다.
   - **활성화 조건**: 프롬프트가 최소 10자 이상 입력되었을 때만 버튼이 활성화됩니다.
   - **디자인**: 메인 브랜드 색상(#4A90E2)의 배경에 흰색 텍스트를 사용하며, 호버 시에는 약간 더 어두운 색상(#3A80D2)으로 변경됩니다.

4. **이미지 생성 결과 섹션**
   - **UI 구성**: 
     - 생성 전: 빈 영역에 이미지 아이콘과 "여기에 생성된 이미지가 표시됩니다" 텍스트가 표시됩니다.
     - 생성 중: 영역 중앙에 로딩 애니메이션(회전하는 아이콘)이 표시됩니다.
     - 생성 완료: 생성된 이미지가 표시되며, 하단에 갤러리 저장 및 커뮤니티 공유 버튼이 나타납니다.
   - **상호작용**: 
     - 생성된 이미지를 클릭하면 원본 크기로 모달에서 확대 표시됩니다.
     - 이미지 우클릭 시 컨텍스트 메뉴를 통해 다운로드 옵션이 제공됩니다.
   - **디자인**: 생성된 이미지는 그림자 효과와 함께 표시되며, 호버 시 약간의 확대 효과(1.02배)가 적용됩니다.

5. **갤러리 저장 및 커뮤니티 공유 버튼**
   - **UI 구성**: 이미지 생성 결과 하단에 나란히 배치된 두 개의 버튼입니다.
     - 갤러리 저장 버튼: ShadCN의 `Button` 컴포넌트를 사용한 아웃라인 스타일 버튼
     - 커뮤니티 공유 버튼: ShadCN의 `Button` 컴포넌트를 사용한 채워진 스타일 버튼
   - **상호작용**:
     - 갤러리 저장 버튼 클릭 시 저장 성공 알림이 표시됩니다.
     - 커뮤니티 공유 버튼 클릭 시 공유 모달이 열립니다.
   - **디자인**: 
     - 갤러리 저장 버튼: 테두리만 있는 스타일로 메인 색상(#4A90E2) 사용
     - 커뮤니티 공유 버튼: 채워진 스타일로 메인 색상(#4A90E2) 배경과 흰색 텍스트 사용

6. **커뮤니티 공유 모달**
   - **파일 위치**: `components/ShareModal.tsx`
   - **UI 구성**:
     - 모달 헤더: 제목("커뮤니티에 공유하기")과 닫기 버튼
     - 제목 입력 필드: 게시물 제목 입력을 위한 텍스트 필드
     - 설명 입력 필드: 게시물 설명 입력을 위한 텍스트 영역
     - 태그 입력 필드: 태그 추가를 위한 입력 필드와 추가된 태그 표시 영역
     - 공개 설정: 전체 공개/친구 공개 선택 라디오 버튼
     - 공유 버튼: 하단에 배치된 제출 버튼
   - **상호작용**:
     - 태그 입력 후 엔터키 또는 쉼표로 태그 추가 가능
     - 추가된 태그는 뱃지 형태로 표시되며 각 태그 옆의 X 버튼으로 삭제 가능
     - 공유 버튼 클릭 시 로딩 상태 표시 후 성공/실패 알림 표시
   - **디자인**: 
     - 모달 배경은 흰색(#FFFFFF)
     - 태그 뱃지는 연한 파란색(#E6F0FD) 배경에 진한 파란색(#4A90E2) 텍스트
     - 공유 버튼은 메인 브랜드 색상(#4A90E2)의 배경에 흰색 텍스트

#### 2. 사용자 흐름 및 상호작용

1. **이미지 생성 화면 진입**
   - 메인 화면의 상단 네비게이션 메뉴에서 "이미지 생성" 링크를 클릭하여 진입합니다.
   - 페이지 로드 시 프롬프트 입력 필드에 자동으로 포커스가 이동합니다.

2. **프롬프트 입력 및 스타일 옵션 설정**
   - 사용자가 프롬프트 입력 필드에 원하는 이미지에 대한 설명을 입력합니다.
   - 원하는 스타일 옵션(색감, 텍스처, 분위기, 강도)을 선택합니다.
   - 모든 옵션은 기본값이 설정되어 있어 필수 선택은 아닙니다.

3. **이미지 생성 프로세스**
   - 사용자가 생성 버튼을 클릭하면 로딩 상태가 표시됩니다.
   - 로딩 중에는 프로그레스 애니메이션이 표시되며, 생성 중임을 알립니다.
   - 생성 완료 시 결과 영역에 생성된 이미지가 표시됩니다.

4. **이미지 저장 및 공유**
   - 생성된 이미지 아래에 표시되는 갤러리 저장 버튼을 클릭하여 개인 갤러리에 저장합니다.
   - 커뮤니티 공유 버튼을 클릭하여 공유 모달을 열고, 제목과 설명을 추가한 후 커뮤니티에 게시합니다.

5. **추가 이미지 생성**
   - 이미지 생성 후 프롬프트와 스타일 옵션을 수정하여 새로운 이미지를 생성할 수 있습니다.
   - 이전 프롬프트는 유지되며, 사용자가 수정 가능합니다.

#### 3. API 연동 (목업 구현)

1. **이미지 생성 API**
   - **파일 위치**: `utils/api.ts`의 `generateImage` 함수
   - **요청 데이터**: `{ prompt: string, style: { color: string, texture: string, mood: string, intensity: number } }`
   - **응답 데이터**: `{ success: boolean, imageURL: string }`
   - **처리 로직**: 실제 API 대신 지연 시간 후 랜덤 이미지 URL 반환하도록 구현

2. **갤러리 저장 API**
   - **파일 위치**: `utils/api.ts`의 `saveToGallery` 함수
   - **요청 데이터**: `{ imageURL: string, prompt: string, style: object }`
   - **응답 데이터**: `{ success: boolean, imageId: string }`
   - **처리 로직**: 이미지 정보를 저장하고 성공 여부와 이미지 ID 반환

3. **커뮤니티 공유 API**
   - **파일 위치**: `utils/api.ts`의 `shareToCommuity` 함수
   - **요청 데이터**: `{ imageURL: string, prompt: string, style: object, title: string, description: string, tags: string[], isPublic: boolean }`
   - **응답 데이터**: `{ success: boolean, postId: string }`
   - **처리 로직**: 게시물 정보를 저장하고 성공 여부와 게시물 ID 반환

#### 4. 테스트 항목

1. **프롬프트 입력 및 스타일 옵션 설정**
   - 프롬프트 입력 필드에 텍스트 입력이 정상적으로 동작하는지 확인
   - 최소 글자 수 미달 시 생성 버튼이 비활성화되는지 확인
   - 각 스타일 옵션이 정상적으로 선택 및 변경되는지 확인

2. **이미지 생성 프로세스**
   - 생성 버튼 클릭 시 로딩 상태가 제대로 표시되는지 확인
   - 로딩 애니메이션이 정상적으로 작동하는지 확인
   - 이미지 생성 완료 후 결과가 적절히 표시되는지 확인

3. **이미지 상호작용**
   - 생성된 이미지 클릭 시 모달에서 확대 보기가 작동하는지 확인
   - 이미지 우클릭 시 다운로드 옵션이 정상 작동하는지 확인

4. **저장 및 공유 기능**
   - 갤러리 저장 버튼 클릭 시 정상적으로 저장되는지 확인
   - 공유 모달이 정상적으로 열리고 닫히는지 확인
   - 태그 추가 및 삭제 기능이 정상 작동하는지 확인
   - 공유 버튼 클릭 시 게시물이 올바르게 생성되는지 확인

5. **반응형 디자인**
   - 다양한 화면 크기에서 UI가 적절하게 조정되는지 확인
   - 모바일 환경에서 스타일 옵션 선택이 사용하기 편리한지 확인
   - 태블릿, 데스크톱 환경에서 모든 기능이 정상 작동하는지 확인

---

### 백엔드 기능명세서 (목업 API 구현)

#### 1. 이미지 생성 API

- **파일 위치**: `utils/api.ts`의 `generateImage` 함수
- **HTTP 메서드**: 실제 구현 시 `POST` 방식 사용 예정
- **요청 데이터**: 
  ```typescript
  {
    prompt: string;
    style: {
      color: string;
      texture: string;
      mood: string;
      intensity: number;
    }
  }
  ```
- **응답 데이터**: `{ success: boolean, imageURL: string }`
- **처리 로직**: 
  - 현재는 고정된 이미지 URL 목록에서 랜덤하게 선택하여 반환
  - 실제 구현 시 AI 이미지 생성 서비스(예: OpenAI DALL-E)를 연동할 예정
- **오류 처리**: 프롬프트 길이 제한, 네트워크 지연 및 실패 상황 시뮬레이션을 위한 타임아웃 처리

#### 2. 갤러리 저장 API

- **파일 위치**: `utils/api.ts`의 `saveToGallery` 함수
- **HTTP 메서드**: 실제 구현 시 `POST` 방식 사용 예정
- **요청 데이터**: 
  ```typescript
  {
    imageURL: string;
    prompt: string;
    style: {
      color: string;
      texture: string;
      mood: string;
      intensity: number;
    }
  }
  ```
- **응답 데이터**: `{ success: boolean, imageId: string }`
- **처리 로직**: 
  - 현재는 저장 성공을 시뮬레이션하고 가상의 이미지 ID 반환
  - 실제 구현 시 데이터베이스에 이미지 정보 저장 예정
- **권한 처리**: 실제 구현 시 인증된 사용자만 갤러리에 저장 가능하도록 처리 예정

#### 3. 커뮤니티 공유 API

- **파일 위치**: `utils/api.ts`의 `shareToCommuity` 함수
- **HTTP 메서드**: 실제 구현 시 `POST` 방식 사용 예정
- **요청 데이터**: 
  ```typescript
  {
    imageURL: string;
    prompt: string;
    style: {
      color: string;
      texture: string;
      mood: string;
      intensity: number;
    };
    title: string;
    description: string;
    tags: string[];
    isPublic: boolean;
  }
  ```
- **응답 데이터**: `{ success: boolean, postId: string }`
- **처리 로직**: 
  - 현재는 공유 성공을 시뮬레이션하고 가상의 게시물 ID 반환
  - 실제 구현 시 데이터베이스에 게시물 정보 저장 예정
- **권한 처리**: 실제 구현 시 인증된 사용자만 커뮤니티에 공유 가능하도록 처리 예정

#### 4. 테스트 항목

1. **API 응답 지연 시뮬레이션**
   - 이미지 생성 API의 지연 시간 설정 (1500ms ~ 3000ms)
   - 갤러리 저장 및 커뮤니티 공유 API의 지연 시간 설정 (300ms ~ 800ms)
   - 프론트엔드 로딩 상태 처리가 올바르게 작동하는지 확인

2. **오류 처리 시뮬레이션**
   - 프롬프트 길이 제한 위반 시 적절한 오류 응답 반환
   - 네트워크 오류 상황에 대한 처리 확인
   - 이미지 생성 실패 시 사용자에게 적절한 오류 메시지 표시

3. **이미지 품질 및 형식 처리**
   - 생성된 이미지의 해상도 및 파일 크기 확인
   - 다양한 디바이스에서 이미지 로딩 속도 테스트
   - 이미지 캐싱 처리가 올바르게 적용되는지 확인

4. **실제 백엔드 연동 준비**
   - 모든 목업 API 함수가 실제 HTTP 요청으로 쉽게 전환 가능한지 확인
   - 요청/응답 데이터 형식이 일관되게 유지되는지 검증
   - 인증 토큰 처리가 적절히 구현되어 있는지 확인 