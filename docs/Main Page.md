## 메인페이지 기능명세서 (업데이트)

---

### 프론트엔드 기능명세서

#### 1. 화면 레이아웃 및 디자인 명세

- **파일 위치**: `app/page.tsx`

1. **프롬프트 입력 섹션**
   - **UI 구성**: 화면 상단 중앙에 배치된 텍스트 입력 필드로, ShadCN의 `Input` 컴포넌트를 사용해 간결한 백색 배경에 그림자 효과를 적용했습니다.
   - **상호작용**: 사용자가 프롬프트 입력 필드에 텍스트를 입력합니다.
   - **오류 처리**: 프롬프트 필드가 비어 있을 경우 이미지 생성 버튼이 비활성화되며, 오류 메시지가 표시됩니다.
   - **디자인**: 입력 필드에 사용자 친화적인 플레이스홀더 텍스트를 추가하고, 포커스 시 테두리 색이 메인 브랜드 색상(#4A90E2)으로 변경됩니다.

2. **이미지 생성 버튼**
   - **UI 구성**: 프롬프트 입력 필드 하단에 배치되며, ShadCN의 `Button` 컴포넌트를 사용한 직사각형 버튼입니다.
   - **상호작용**: 버튼 클릭 시 로딩 상태를 표시하며, 로딩 중에는 스피너 아이콘과 함께 "이미지 생성 중..." 텍스트가 표시됩니다.
   - **활성화 조건**: 프롬프트가 입력되었을 때만 버튼이 활성화됩니다.
   - **디자인**: 메인 브랜드 색상(#4A90E2)의 배경에 흰색 텍스트를 사용하며, 호버 시에는 약간 더 어두운 색상(#3A80D2)으로 변경됩니다.

3. **커뮤니티 피드 섹션**
   - **UI 구성**: 메인 화면 하단에 반응형 그리드 레이아웃으로 표시되며, `components/CommunityFeedCard.tsx`에 정의된 카드 컴포넌트를 사용합니다.
   - **상호작용**: 
     - 카드 클릭 시 해당 게시물의 상세 페이지(`/post/[postId]`)로 이동합니다.
     - 좋아요, 댓글, 스크랩 버튼에 직접적인 상호작용이 가능하며, 각 버튼 클릭 시 이벤트 버블링이 방지되어 상세 페이지로 이동하지 않습니다.
   - **피드 로딩 상태**: 데이터 로딩 중에는 스피너 아이콘이 표시됩니다.
   - **카드 호버 효과**: 마우스 호버 시 그림자 효과가 강화되고 약간 확대(1.02배)되어 클릭 가능함을 시각적으로 표현합니다.

4. **댓글 모달**
   - **파일 위치**: `components/CommentModal.tsx`
   - **UI 구성**:
     - 모달 헤더: 제목과 닫기 버튼이 포함됩니다.
     - 댓글 작성 폼: 입력 필드와 등록 버튼으로 구성됩니다.
     - 댓글 목록: 작성자 정보, 내용, 작성 시간이 표시됩니다.
   - **상호작용**:
     - 댓글 작성과 동시에 댓글 목록에 반영됩니다.
     - 모달 외부 클릭 시 닫힙니다.
   - **상태 처리**: 
     - 댓글 로딩 중에는 스피너가 표시됩니다.
     - 댓글이 없을 경우 안내 메시지가 표시됩니다.

5. **피드 상세 화면**
   - **파일 위치**: `app/post/[postId]/page.tsx`
   - **UI 구성**:
     - 상단: 뒤로가기 버튼과 페이지 제목
     - 이미지 섹션: 중앙에 큰 이미지 표시
     - 작성자 정보: 프로필 이미지, 사용자명, 작성 시간
     - 상호작용 버튼: 좋아요, 댓글, 스크랩, 공유 버튼과 각각의 카운트
     - 프롬프트 정보: 이미지 생성에 사용된 프롬프트와 스타일 옵션(뱃지 형태)
     - 댓글 섹션: 댓글 작성 폼과 댓글 목록
   - **상호작용**:
     - 좋아요/스크랩 버튼 클릭 시 즉시 상태 반영
     - 댓글 작성 시 실시간으로 목록에 추가
     - 뒤로가기 버튼 클릭 시 이전 페이지로 이동

#### 2. 사용자 흐름 및 상호작용

1. **메인 화면 초기 진입**
   - 페이지 로드 시 자동으로 커뮤니티 피드 데이터를 불러와 표시합니다.
   - 로딩 중에는 스피너 아이콘이 표시됩니다.

2. **프롬프트 입력 → 이미지 생성**
   - 사용자가 프롬프트 입력 후 생성 버튼을 클릭하면 로딩 상태가 표시됩니다.
   - 생성 완료 시 알림 메시지로 결과를 확인할 수 있습니다.
   
3. **커뮤니티 피드 상호작용**
   - 각 카드의 좋아요 버튼 클릭 시 상태가 토글되고 카운트가 업데이트됩니다.
   - 댓글 아이콘 클릭 시 댓글 모달이 열립니다.
   - 스크랩 버튼 클릭 시 상태가 토글되고 카운트가 업데이트됩니다.

4. **피드 카드 클릭 → 상세 페이지 이동**
   - 카드 클릭 시 해당 게시물의 상세 페이지로 이동합니다.
   - 상세 페이지에서는 이미지 확대, 프롬프트 정보 확인, 댓글 작성 등이 가능합니다.

5. **상세 페이지 → 메인 화면으로 돌아가기**
   - 상세 페이지 상단의 뒤로가기 버튼을 클릭하면 메인 화면으로 돌아갑니다.

#### 3. API 연동 (목업 구현)

1. **커뮤니티 피드 API**
   - **파일 위치**: `utils/api.ts`의 `fetchCommunityFeed` 함수
   - **요청 방식**: 비동기 함수 호출
   - **응답 데이터**: `{ posts: IPost[] }`
   - **상태 관리**: 로딩 상태와 오류 상태를 관리하여 UI에 적절히 반영

2. **이미지 생성 API**
   - **파일 위치**: `utils/api.ts`의 `generateImage` 함수
   - **요청 데이터**: `{ prompt: string }`
   - **응답 데이터**: `{ success: boolean, imageURL: string }`
   - **처리 로직**: 실제 API 대신 랜덤 이미지 URL을 반환하도록 구현

3. **좋아요 토글 API**
   - **파일 위치**: `utils/api.ts`의 `toggleLike` 함수
   - **요청 데이터**: `postId: string`
   - **응답 데이터**: `{ success: boolean, isLiked: boolean, likes: number }`
   - **처리 로직**: 게시물의 좋아요 상태를 토글하고 카운트를 업데이트

4. **스크랩 토글 API**
   - **파일 위치**: `utils/api.ts`의 `toggleScrap` 함수
   - **요청 데이터**: `postId: string`
   - **응답 데이터**: `{ success: boolean, isScrapped: boolean, scraps: number }`
   - **처리 로직**: 게시물의 스크랩 상태를 토글하고 카운트를 업데이트

5. **댓글 추가 API**
   - **파일 위치**: `utils/api.ts`의 `addComment` 함수
   - **요청 데이터**: `postId: string, content: string`
   - **응답 데이터**: `{ success: boolean, comment: IComment }`
   - **처리 로직**: 새 댓글을 생성하고 게시물의 댓글 수를 증가

6. **포스트 상세 정보 API**
   - **파일 위치**: `utils/api.ts`의 `fetchPostDetail` 함수
   - **요청 데이터**: `postId: string`
   - **응답 데이터**: `{ success: boolean, post?: IPost }`
   - **처리 로직**: 해당 ID의 게시물 정보를 조회

7. **포스트 댓글 목록 API**
   - **파일 위치**: `utils/api.ts`의 `fetchPostComments` 함수
   - **요청 데이터**: `postId: string`
   - **응답 데이터**: `{ success: boolean, comments: IComment[] }`
   - **처리 로직**: 해당 게시물의 댓글 목록을 조회

#### 4. 테스트 항목

1. **프롬프트 입력 및 이미지 생성**
   - 프롬프트 입력 필드에 텍스트 입력이 정상적으로 동작하는지 확인
   - 빈 입력 상태에서 이미지 생성 버튼이 비활성화되는지 확인
   - 이미지 생성 버튼 클릭 시 로딩 상태가 제대로 표시되는지 확인
   - 이미지 생성 완료 후 결과가 적절히 표시되는지 확인

2. **커뮤니티 피드 및 카드 상호작용**
   - 피드 데이터가 정상적으로 로드되는지 확인
   - 카드 클릭 시 정확한 상세 페이지로 이동하는지 확인
   - 좋아요, 댓글, 스크랩 버튼이 각각 독립적으로 작동하는지 확인
   - 상호작용 후 UI에 상태 변화가 반영되는지 확인

3. **댓글 모달 기능**
   - 모달이 정상적으로 열리고 닫히는지 확인
   - 댓글 목록이 제대로 표시되는지 확인
   - 댓글 작성이 정상적으로 동작하는지 확인
   - 작성된 댓글이 목록에 실시간으로 추가되는지 확인

4. **상세 페이지 기능**
   - 이미지, 작성자 정보, 프롬프트 정보가 정확히 표시되는지 확인
   - 좋아요, 스크랩 토글이 정상 작동하는지 확인
   - 댓글 작성 및 목록 표시가 제대로 동작하는지 확인
   - 뒤로가기 버튼이 올바르게 이전 페이지로 이동하는지 확인

5. **반응형 디자인**
   - 다양한 화면 크기에서 UI가 적절하게 조정되는지 확인
   - 모바일, 태블릿, 데스크톱 환경에서 모든 기능이 정상 작동하는지 확인

---

### 백엔드 기능명세서 (목업 API 구현)

#### 1. 프롬프트를 통한 이미지 생성 API

- **파일 위치**: `utils/api.ts`의 `generateImage` 함수
- **HTTP 메서드**: 실제 구현 시 `POST` 방식 사용 예정
- **요청 데이터**: `{ prompt: string }`
- **응답 데이터**: `{ success: boolean, imageURL: string }`
- **처리 로직**: 
  - 현재는 고정된 이미지 URL 목록에서 랜덤하게 선택하여 반환
  - 실제 구현 시 AI 이미지 생성 서비스(예: OpenAI DALL-E)를 연동할 예정
- **오류 처리**: 네트워크 지연 및 실패 상황 시뮬레이션을 위한 타임아웃 처리

#### 2. 커뮤니티 피드 API

- **파일 위치**: `utils/api.ts`의 `fetchCommunityFeed` 함수
- **HTTP 메서드**: 실제 구현 시 `GET` 방식 사용 예정
- **요청 데이터**: 없음 (기본 피드)
- **응답 데이터**: `{ posts: IPost[] }`
- **처리 로직**: 
  - 현재는 `mockData.ts`에 정의된 데이터를 반환
  - 실제 구현 시 데이터베이스에서 최신 게시물을 조회 예정
- **정렬 및 필터링**: 최신순 정렬(기본값)

#### 3. 좋아요 토글 API

- **파일 위치**: `utils/api.ts`의 `toggleLike` 함수
- **HTTP 메서드**: 실제 구현 시 `POST` 방식 사용 예정
- **요청 데이터**: `postId: string`
- **응답 데이터**: `{ success: boolean, isLiked: boolean, likes: number }`
- **처리 로직**: 
  - 현재는 메모리 내 목업 데이터 상태를 토글
  - 실제 구현 시 데이터베이스에서 좋아요 상태 업데이트 예정
- **권한 처리**: 실제 구현 시 인증된 사용자만 가능하도록 처리 예정

#### 4. 스크랩 토글 API

- **파일 위치**: `utils/api.ts`의 `toggleScrap` 함수
- **HTTP 메서드**: 실제 구현 시 `POST` 방식 사용 예정
- **요청 데이터**: `postId: string`
- **응답 데이터**: `{ success: boolean, isScrapped: boolean, scraps: number }`
- **처리 로직**:
  - 현재는 메모리 내 목업 데이터 상태를 토글
  - 실제 구현 시 데이터베이스에서 스크랩 상태 업데이트 예정
- **권한 처리**: 실제 구현 시 인증된 사용자만 가능하도록 처리 예정

#### 5. 댓글 관리 API

- **파일 위치**: 
  - `utils/api.ts`의 `addComment` 함수
  - `components/CommentModal.tsx` 내 목업 댓글 데이터
- **HTTP 메서드**: 실제 구현 시 `POST`, `GET` 방식 사용 예정
- **요청/응답 데이터**:
  - 댓글 추가: `{ postId: string, content: string }` → `{ success: boolean, comment: IComment }`
  - 댓글 조회: `postId: string` → `{ success: boolean, comments: IComment[] }`
- **처리 로직**:
  - 현재는 메모리 내 목업 데이터 생성 및 관리
  - 실제 구현 시 데이터베이스에서 댓글 CRUD 작업 수행 예정

#### 6. 포스트 상세 정보 API

- **파일 위치**: `utils/api.ts`의 `fetchPostDetail` 함수
- **HTTP 메서드**: 실제 구현 시 `GET` 방식 사용 예정
- **요청 데이터**: `postId: string` (URL 파라미터)
- **응답 데이터**: `{ success: boolean, post?: IPost }`
- **처리 로직**:
  - 현재는 메모리 내 목업 데이터에서 해당 ID의 게시물 검색
  - 실제 구현 시 데이터베이스에서 게시물 상세 정보 조회

#### 7. 테스트 항목

1. **API 응답 지연 시뮬레이션**
   - 각 API 함수에 적절한 지연 시간 설정 (300ms ~ 1500ms)
   - 프론트엔드 로딩 상태 처리가 올바르게 작동하는지 확인

2. **오류 처리 시뮬레이션**
   - 존재하지 않는 postId 요청 시 적절한 오류 응답 반환
   - 네트워크 오류 상황에 대한 처리 확인

3. **데이터 일관성 확인**
   - 좋아요/스크랩 토글 후 포스트 상세 조회 시 상태가 유지되는지 확인
   - 댓글 추가 후 포스트의 댓글 수가 정확히 증가하는지 확인

4. **실제 백엔드 연동 준비**
   - 모든 목업 API 함수가 실제 HTTP 요청으로 쉽게 전환 가능한지 확인
   - 응답 데이터 형식이 일관되게 유지되는지 검증